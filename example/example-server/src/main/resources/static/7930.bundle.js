"use strict";(self.webpackChunkadmin_pro_ui=self.webpackChunkadmin_pro_ui||[]).push([[1648,7930],{1648:(e,n,t)=>{t.r(n),t.d(n,{default:()=>l});var r=t(74848),i=t(20533),o=t.n(i),a=t(93658),u=t(22600),c=t(78295);const l=function(e){var n=o().useState([]),t=n[0],i=n[1];return(0,r.jsx)(c.A,{width:"60%",open:e.visible,onCancel:function(){return e.setVisible(!1)},onClose:function(){return e.setVisible(!1)},destroyOnClose:!0,title:"选择用户",onOk:function(){e.onSelect&&e.onSelect(t),e.setVisible(!1)},children:(0,r.jsx)(a.A,{columns:[{title:"编号",dataIndex:"id",search:!1},{title:"姓名",dataIndex:"name"},{title:"账号名",dataIndex:"username"},{title:"创建时间",dataIndex:"createTime",valueType:"dateTime"}],rowKey:"id",search:!1,rowSelection:{type:e.multiple?"checkbox":"radio",selectedRowKeys:t.map((function(e){return e.id})),onChange:function(e,n){i(n)}},request:function(e,n,t){return r=void 0,i=void 0,a=function(){return function(e,n){var t,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(o=0)),o;)try{if(t=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=n.call(e,o)}catch(e){u=[6,e],r=0}finally{t=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}(this,(function(r){return[2,(0,u.p_)(e,n,t,[])]}))},new((o=void 0)||(o=Promise))((function(e,n){function t(e){try{c(a.next(e))}catch(e){n(e)}}function u(e){try{c(a.throw(e))}catch(e){n(e)}}function c(n){var r;n.done?e(n.value):(r=n.value,r instanceof o?r:new o((function(e){e(r)}))).then(t,u)}c((a=a.apply(r,i||[])).next())}));var r,i,o,a}})})}},17930:(e,n,t)=>{t.r(n),t.d(n,{default:()=>j});var r=t(74848),i=t(20533),o=t.n(i),a=t(62978),u=t(93658),c=t(22600),l=t(63532),s=t(42702),d=t(16044),f=t(79249),h=t(78295),p=t(78602),v=t(93598),y=t(1648),b=t(88562),x=t(44548),m=function(e,n,t,r){return new(t||(t=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function u(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,u)}c((r=r.apply(e,n||[])).next())}))},w=function(e,n){var t,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(o=0)),o;)try{if(t=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=n.call(e,o)}catch(e){u=[6,e],r=0}finally{t=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};const j=function(){var e=o().useState(!1),n=e[0],t=e[1],j=o().useState(!1),k=j[0],A=j[1],I=o().useState({}),C=I[0],g=I[1],S=(0,i.useRef)(),T=b.lV.useForm(),O=[{title:"编号",dataIndex:"id",search:!1},{title:"姓名",dataIndex:"name"},{title:"是否流程管理员",dataIndex:"flowManager",render:function(e,n){return(0,r.jsxs)(s.A,{children:[n.flowManager?"是":"否",(0,r.jsx)(d.A,{title:"确认要设置为流程管理员吗？",onConfirm:function(){var e;e=n.id,(0,c.em)(e).then((function(e){var n;e.success&&(l.Ay.success("设置成功").then(),null===(n=S.current)||void 0===n||n.reload())}))},okText:"确认",cancelText:"取消",children:(0,r.jsxs)("a",{children:[" ",(0,r.jsx)(p.A,{})]})})]})}},{title:"账号名",dataIndex:"username"},{title:"委托人",dataIndex:"entrustOperatorName",render:function(e,n){return(0,r.jsxs)(s.A,{children:[n.entrustOperatorName,(0,r.jsxs)("a",{onClick:function(){g(n),A(!0)},children:[" ",(0,r.jsx)(p.A,{})]}),n.entrustOperatorId>0&&(0,r.jsx)(d.A,{title:"确认要移除委托人吗？",onConfirm:function(){var e;e=n.id,(0,c.c1)(e).then((function(e){var n;e.success&&(l.Ay.success("移除成功").then(),null===(n=S.current)||void 0===n||n.reload())}))},children:(0,r.jsx)("a",{children:(0,r.jsx)(v.A,{})})})]})}},{title:"创建时间",dataIndex:"createTime",valueType:"dateTime"},{title:"操作",valueType:"option",render:function(e,n){return[(0,r.jsx)("a",{onClick:function(){T.setFieldsValue(n),T.setFieldValue("password",""),t(!0)},children:"编辑"},"editor"),(0,r.jsx)(d.A,{title:"确认要删除吗？",onConfirm:function(){var e;e=n.id,(0,c.TF)(e).then((function(e){var n;e.success&&(l.Ay.success("删除成功").then(),null===(n=S.current)||void 0===n||n.reload())}))},children:(0,r.jsx)("a",{children:"删除"})},"remove")]}}];return(0,r.jsxs)(a.LN,{children:[(0,r.jsx)(u.A,{actionRef:S,toolBarRender:function(){return[(0,r.jsx)(f.Ay,{type:"primary",onClick:function(){t(!0)},children:"创建用户"})]},columns:O,rowKey:"id",search:!1,request:function(e,n,t){return m(void 0,void 0,void 0,(function(){return w(this,(function(r){return[2,(0,c.p_)(e,n,t,[])]}))}))}}),(0,r.jsx)(h.A,{title:"编辑用户",open:n,onClose:function(){t(!1)},onCancel:function(){t(!1)},onOk:function(){return m(void 0,void 0,void 0,(function(){return w(this,(function(e){switch(e.label){case 0:return[4,T.submit()];case 1:return e.sent(),[2]}}))}))},children:(0,r.jsxs)(b.lV,{layout:"vertical",form:T,onFinish:function(e){return m(void 0,void 0,void 0,(function(){return w(this,(function(n){return function(e){(0,c.UN)(e).then((function(e){var n;e.success&&(t(!1),l.Ay.success("保存成功").then(),null===(n=S.current)||void 0===n||n.reload())}))}(e),[2]}))}))},children:[(0,r.jsx)(b.ZQ,{name:"id",hidden:!0}),(0,r.jsx)(b.ZQ,{name:"name",label:"姓名",required:!0,validateFunction:x.wb.validateNotEmpty}),(0,r.jsx)(b.ZQ,{name:"username",label:"登录账号",required:!0,validateFunction:x.wb.validateNotEmpty}),(0,r.jsx)(b.ZQ,{name:"password",label:"登录密码",required:!0,validateFunction:x.wb.validateNotEmpty}),(0,r.jsx)(b.$,{name:"flowManager",label:"是否流程管理员"})]})}),(0,r.jsx)(y.default,{multiple:!1,visible:k,setVisible:A,onSelect:function(e){var n;e&&e.length>0&&(n={id:C.id,entrustUserId:e[0].id},(0,c.eg)(n).then((function(e){var n;e.success&&(l.Ay.success("设置成功").then(),null===(n=S.current)||void 0===n||n.reload())})))}})]})}}}]);